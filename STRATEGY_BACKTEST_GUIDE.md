# 📊 個股策略回測功能使用指南

## 🚀 功能概述

新增的個股策略回測功能讓您可以：
- 輸入任何台灣股票代碼
- 查看該股票一年內的價格走勢
- 使用布林通道策略進行回測
- 比較策略表現與買入持有策略

## 🎯 如何使用

### 1. 啟動應用
```bash
streamlit run stock_strategy_app.py
```

### 2. 選擇功能頁面
在側邊欄選擇「📊 個股策略回測」

### 3. 輸入股票代碼
- 輸入台灣股票代碼（例如：2330、2454、0050）
- 系統會自動添加 .TW 後綴
- 選擇回測期間（1年、2年、3年、5年）

### 4. 查看股價走勢
系統會顯示該股票在選定期間內的價格走勢圖

### 5. 設定布林通道策略參數
- **移動平均週期**：預設20天，可調整5-50天
- **標準差倍數**：預設2.0，可調整1.0-3.0
- **初始資金**：預設10萬元，可自訂

### 6. 執行回測
點擊「🚀 執行布林通道策略回測」按鈕

## 📈 布林通道策略說明

### 策略原理
- **買入信號**：股價觸及下軌後反彈
- **賣出信號**：股價觸及上軌
- **風險控制**：僅在無持股時買入，有持股時賣出

### 指標計算
- **中軌**：N日移動平均線
- **上軌**：中軌 + (標準差 × 倍數)
- **下軌**：中軌 - (標準差 × 倍數)

## 📊 回測結果解讀

### 基本指標
- **初始資金**：投資起始金額
- **最終資金**：策略執行後的總資金
- **總報酬率**：投資報酬百分比
- **交易次數**：策略執行的買賣次數

### 視覺化圖表

#### 1. 策略表現與布林通道圖
- 黑線：股價走勢
- 藍線：中軌（移動平均線）
- 紅虛線：上軌
- 綠虛線：下軌
- 綠三角：買入點
- 紅三角：賣出點

#### 2. 投資組合價值變化
- 藍線：布林通道策略表現
- 灰虛線：買入持有策略表現

#### 3. 策略比較表
對比布林通道策略與買入持有策略的表現差異

### 交易記錄
詳細記錄每次買賣的：
- 日期
- 動作（買入/賣出）
- 價格
- 股數
- 剩餘資金

## 💡 使用技巧

### 參數調整建議
- **短線交易**：縮短移動平均週期（10-15天）
- **長線投資**：延長移動平均週期（25-30天）
- **敏感度調整**：減少標準差倍數（1.5-2.0）
- **保守策略**：增加標準差倍數（2.5-3.0）

### 適用股票類型
- **高波動股票**：科技股、生技股
- **穩定股票**：金融股、傳產股
- **指數型ETF**：0050、0056等

## ⚠️ 注意事項

### 回測限制
- 使用歷史數據，無法保證未來表現
- 未考慮交易成本（手續費、稅金）
- 假設可以按收盤價成交
- 不考慮股利分配

### 風險提醒
- 策略僅供參考，投資需謹慎
- 過去績效不代表未來表現
- 建議結合基本面分析
- 注意資金管理和風險控制

## 🔧 故障排除

### 常見問題

#### 無法獲取股價數據
- 檢查股票代碼是否正確
- 確認網路連線正常
- 嘗試其他股票代碼

#### 回測失敗
- 確認數據期間足夠（至少50個交易日）
- 檢查參數設定是否合理
- 重新整理頁面再試

#### 圖表顯示異常
- 檢查瀏覽器相容性
- 嘗試重新載入頁面
- 清除瀏覽器快取

## 📝 範例操作

### 範例1：台積電(2330)布林通道回測
1. 輸入股票代碼：`2330`
2. 選擇期間：`1y`
3. 設定參數：MA週期20、標準差2.0、資金100,000
4. 執行回測，觀察結果

### 範例2：聯發科(2454)敏感策略
1. 輸入股票代碼：`2454`
2. 調整參數：MA週期15、標準差1.8
3. 比較不同參數的回測結果

## 🎉 功能特色

- **即時數據**：使用Yahoo Finance API獲取最新股價
- **互動圖表**：支援縮放、懸停顯示詳細資訊
- **多重比較**：同時顯示策略表現與基準比較
- **詳細記錄**：完整的交易歷史追蹤
- **參數調整**：靈活的策略參數自訂功能

---

💡 **提示**：建議先用知名大型股（如台積電、鴻海）進行測試，熟悉功能後再應用於其他股票。

🔗 **相關連結**：
- [布林通道策略詳解](https://zh.wikipedia.org/wiki/布林帶)
- [技術分析基礎](https://www.twse.com.tw/zh/page/education/index.html) 